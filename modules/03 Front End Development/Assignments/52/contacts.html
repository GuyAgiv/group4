<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DMail</title>
    <link rel="stylesheet" type="text/css" href="dmaiStyles.css">
</head>

<body>

    <h1>Welcome to DMail</h1>
    <div id="container">
        <div id="leftMenu" class="borderStyle">
            <a href="inbox.html">Inbox</a>
            <a href="sent.html">Sent</a>
            <a href="contacts.html">Contacts</a>
        </div>

        <div id="mainArea" class="borderStyle">
            <ol id="contactsList">
                <a>
                    <li id="contact1" onclick="displayContactInfo(event)">Contact</li>
                </a>
                <a>
                    <li id="contact2" onclick="displayContactInfo(event)">Contact</li>
                </a>
                <a>
                    <li id="contact3" onclick="displayContactInfo(event)">Contact</li>
                </a>
                <a>
                    <li id="contact4" onclick="displayContactInfo(event)">Contact</li>
                </a>
                <a>
                    <li id="contact5" onclick="displayContactInfo(event)">Contact</li>
                </a>
            </ol>

            <table id="tableOfContacts">
                <tr>
                    <th onclick="Sort('first-name')">First Name</th>
                    <th onclick="Sort('last-name')">Last Name</th>
                    <th onclick="Sort('email')">Email</th>
                </tr>
            </table>
        </div>
    </div>


    <script>
        function Contact(firstName, lastName, emailAddress) {
            this.firstName = firstName;
            this.lastName = lastName;
            this.emailAddress = emailAddress;
        }

        var contactList = [];
        var contact1 = new Contact("Guy", "Agiv", "guyagiv@gmail.com");
        var contact2 = new Contact("Harry", "Potter", "theboywholived@gmail.com");
        var contact3 = new Contact("Dudu", "Faruk", "yeledmetumtam@gmail.com");
        var contact4 = new Contact("Bibi", "Netanyahu", "thenextpm@gmail.com");
        var contact5 = new Contact("Lior", "Agiv", "lioryagiv@gmail.com");
        contactList.push(contact1);
        contactList.push(contact2);
        contactList.push(contact3);
        contactList.push(contact4);
        contactList.push(contact5);

        var contactTable = document.querySelector("#tableOfContacts");

        function displayContactInfo(e) {
            var contactId = e.target.id;
            var contactNum = contactId.slice(-1);

            var newContactRow = document.createElement("tr");
            var firstName = document.createElement("td");
            var lastName = document.createElement("td");
            var emailName = document.createElement("td");

            firstName.className = "contact";
            lastName.className = "contact";
            emailName.className = "contact";

            firstName.innerText = contactList[contactNum - 1].firstName;
            lastName.innerText = contactList[contactNum - 1].lastName;
            emailName.innerText = contactList[contactNum - 1].emailAddress;

            newContactRow.appendChild(firstName);
            newContactRow.appendChild(lastName);
            newContactRow.appendChild(emailName);

            contactTable.appendChild(newContactRow);

            var theLiItem = document.querySelector("#" + contactId);
            theLiItem.onclick = function () {
                return false;
            }
        }

        function Sort(sortStyle) {
            var trTags = document.querySelectorAll("tr");
            var templateCompare;
            if (trTags.length > 2) {
                var sortedArray = [];

                for(var i = 1; i < trTags.length; i++)
                {
                    sortedArray.push({"firstName" : trTags[i].childNodes[0].innerText, "lastName" : trTags[i].childNodes[1].innerText, "emailAddress" : trTags[i].childNodes[2].innerText});
                }
                
                if (sortStyle == 'first-name') {
                    templateCompare = function compare(obj1, obj2) {
                        if (obj1.firstName < obj2.firstName) {
                            return -1;
                        }
                        else if (obj1.firstName > obj2.firstName) {
                            return 1;
                        }
                        return 0;
                    }
                }
                else if (sortStyle == 'last-name') {
                    templateCompare = function compare(obj1, obj2) {
                        if (obj1.lastName < obj2.lastName) {
                            return -1;
                        }
                        else if (obj1.lastName > obj2.lastName) {
                            return 1;
                        }
                        return 0;
                    }
                }
                else {
                    templateCompare = function compare(fn1, fn2) {
                        if (fn1.emailAddress < fn2.emailAddress) {
                            return -1;
                        }
                        else if (fn1.emailAddress > fn2.emailAddress) {
                            return 1;
                        }
                        return 0;
                    }
                }

                sortedArray.sort(templateCompare);

                for(var i = 1; i < trTags.length; i++)
                {
                    trTags[i].childNodes[0].innerText = sortedArray[i-1].firstName;
                    trTags[i].childNodes[1].innerText = sortedArray[i-1].lastName;
                    trTags[i].childNodes[2].innerText = sortedArray[i-1].emailAddress;
                }
            }
        }
    </script>
</body>

</html>
